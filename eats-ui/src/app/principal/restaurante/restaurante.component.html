<section *ngIf="restaurante">
  <h2>{{restaurante.nome}}</h2>
  <p>★ {{ restaurante.mediaAvaliacoes | number:'1.1-1' }}</p>
  <p><span>{{restaurante.tipoDeCozinha.nome}}</span> • <span>{{restaurante.tempoDeEntregaMinimoEmMinutos}} - {{restaurante.tempoDeEntregaMaximoEmMinutos}}</span> min</p>
  <p>{{ restaurante.distancia | number:'1.1-1' }} km</p>
  <p>{{ restaurante.descricao }}</p>
</section>

<section *ngIf="itemDoPedidoEscolhido">
  <p><strong>{{ itemDoPedidoEscolhido.itemDoCardapio?.nome }}</strong></p>
  <form #itemDoPedidoEscolhidoForm="ngForm" (ngSubmit)="adicionarItemAoPedido()">
    <div>
        <label for="quantidade">Quantidade</label>
        <input type="number" id="quantidade" name="quantidade" [(ngModel)]="itemDoPedidoEscolhido.quantidade">
    </div>
    <div>
        <label for="observacao">Observação</label>
        <textarea id="observacao" name="observacao"  [(ngModel)]="itemDoPedidoEscolhido.observacao"></textarea>
    </div>
    <button type="submit" [disabled]="!itemDoPedidoEscolhidoForm.form.valid">Adicionar</button>
  </form>
</section>

<section *ngIf="restaurante && pedido.itens.length">
  <h2>Pedido</h2>
  <div *ngFor="let itemPedido of pedido.itens">
    <p>{{ itemPedido.quantidade }}x {{ itemPedido.itemDoCardapio.nome }}</p>
  </div>
  <button (click)="fazerPedido()">Fazer Pedido</button>
</section>

<section *ngIf="restaurante && cardapio">
  <h2>Cardápio</h2>
  <div *ngFor="let categoria of cardapio.categorias">
    <h3>{{ categoria.nome | uppercase }}</h3>
    <div *ngFor="let itemCardapio of categoria.itens" (click)="escolherItemDoCardapio(itemCardapio)">
      <h4>{{ itemCardapio.nome }}</h4>
      <p>{{ itemCardapio.descricao }}</p>
      <p *ngIf="!itemCardapio.precoPromocional; else promocional">{{ itemCardapio.preco | currency:'BRL' }}</p>
      <ng-template #promocional>
        <del>{{ itemCardapio.preco | currency:'BRL' }}</del>
        <p>{{ itemCardapio.precoPromocional | currency:'BRL' }}</p>
      </ng-template>

    </div>
  </div>
</section>

<section *ngIf="restaurante && avaliacoes.length">
  <h2>Avaliações</h2>
  <div *ngFor="let avaliacao of avaliacoes">
    <p>Nota: {{ avaliacao.nota }}</p>
    <p>{{ avaliacao.comentario }}</p>
  </div>
</section>

